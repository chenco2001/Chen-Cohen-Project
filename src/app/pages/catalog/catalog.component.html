<section class="page">
  <header class="hero">
    <div class="kicker">Store</div>
    <h1 class="headline">The best way to buy the products you love.</h1>
    <p class="sub">{{ filterLabel }}</p>
  </header>

  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Filters">
      <div class="filterCard">
        <div class="filterTitle">Filter</div>

        <div class="filterSection">
          <div class="filterLabel">Brand</div>

          <div class="brandTabs" role="group" aria-label="Brand filter">
            <button type="button" class="tab" [class.active]="selectedBrand === 'all'" (click)="selectBrand('all')">All</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'apple'" (click)="selectBrand('apple')">Apple</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'sony'" (click)="selectBrand('sony')">Sony</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'beats'" (click)="selectBrand('beats')">Beats</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'samsung'" (click)="selectBrand('samsung')">Samsung</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'microsoft'" (click)="selectBrand('microsoft')">Microsoft</button>
            <button type="button" class="tab" [class.active]="selectedBrand === 'meta'" (click)="selectBrand('meta')">Meta</button>
          </div>
        </div>

        <div class="filterSection">
          <div class="filterLabel">Category</div>

          <select class="select" [ngModel]="selectedCategory" (ngModelChange)="selectCategory($event)">
            <option value="all">All categories</option>
            <option value="phone">Phones</option>
            <option value="laptop">Laptops</option>
            <option value="tablet">Tablets</option>
            <option value="watch">Watches</option>
            <option value="headphones">Headphones</option>
            <option value="console">Consoles</option>
            <option value="accessory">Accessories</option>
          </select>
        </div>

        <div class="filterSection">
          <div class="tinyNote">
            Tip: click a product to view details.
          </div>
        </div>
      </div>
    </aside>

    <!-- Content -->
    <main class="content">
      <div class="grid">
        <article class="card" *ngFor="let p of filteredProducts">
          <a class="cardLink" [routerLink]="['/product', p.id]" aria-label="Open product">
            <div class="media">
              <img
                [src]="p.image"
                [alt]="p.name"
                loading="lazy"
                (error)="p.image='assets/catalog/placeholder.jpg'"
              />
            </div>

            <div class="meta">
              <div class="tagRow">
                <span class="tag">{{ p.brand | titlecase }}</span>
                <span class="tag ghost">{{ p.category | titlecase }}</span>
              </div>

              <h3 class="name">{{ p.name }}</h3>
              <div class="priceRow">
                <div class="price">{{ p.price | number:'1.0-0' }}$</div>
                <div class="from">or from {{ (p.price/24) | number:'1.0-0' }}$/mo</div>
              </div>
            </div>
          </a>
        <div class="actions">
          <a class="btnGhost" [routerLink]="['/product', p.id]">
            Details
          </a>

          <button class="btnPrimary" type="button" (click)="addToCart(p)">
            Add to cart
          </button>
        </div>
        </article>
      </div>
    </main>
  </div>
</section>