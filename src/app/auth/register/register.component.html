<form [formGroup]="form" (ngSubmit)="register()" novalidate>
  <h1>Create Account</h1>

  <div class="field">
    <label>Email</label>
    <input type="email" formControlName="email" autocomplete="email" />
    <small class="hint" *ngIf="f['email'].touched && f['email'].invalid">
      Please enter a valid email.
    </small>
  </div>

  <div class="field">
    <label>Full Name</label>
    <input type="text" formControlName="fullName" autocomplete="name" />
    <small class="hint" *ngIf="f['fullName'].touched && f['fullName'].invalid">
      Full name must be at least 2 characters.
    </small>
  </div>

  <div class="field">
    <label>Birth Date</label>
    <input type="date" formControlName="birthDate" [min]="minBirthDate" />

    <small class="hint" *ngIf="f['birthDate'].touched && f['birthDate'].errors?.['dateMin']">
      Birth date must be after {{ minBirthDate }}.
    </small>

    <small class="hint" *ngIf="f['birthDate'].touched && f['birthDate'].errors?.['underAge']">
      You must be 18+ to register.
    </small>
  </div>

  <div class="field">
    <label>Gender</label>
    <select formControlName="gender">
      <option value="male">male</option>
      <option value="female">female</option>
    </select>
  </div>

  <div class="field">
    <label>Password</label>
    <input type="password" formControlName="password" autocomplete="new-password" />

    <small class="hint" *ngIf="f['password'].touched && f['password'].errors?.['minlength']">
      Password must be at least 8 characters.
    </small>

    <small class="hint" *ngIf="f['password'].touched && f['password'].errors?.['pattern']">
      Password must include uppercase, lowercase, number, and special character.
    </small>
  </div>

  <div class="field">
    <label>Confirm Password</label>
    <input type="password" formControlName="confirmPassword" autocomplete="new-password" />

    <small class="hint" *ngIf="form.touched && form.errors?.['passwordsMismatch']">
      Passwords do not match.
    </small>
  </div>

  <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
  <p class="success" *ngIf="successMessage">{{ successMessage }}</p>

  <button type="submit" [disabled]="isLoading || form.invalid">
    {{ isLoading ? 'Creating account...' : 'Create account' }}
  </button>

  <p class="hint">
    Already have an account? <a routerLink="/profile">Go to Login</a>
  </p>
</form>